PORT=3000
NODE_ENV=development

# Redis connection (Railway auto-sets REDIS_URL when you add Redis)
REDIS_URL=redis://localhost:6379

TEMP_DIR=/tmp/ffmpeg-rest
MAX_FILE_SIZE=104857600

WORKER_CONCURRENCY=5

# Authentication (required for production)
# Generate with: openssl rand -base64 32
AUTH_TOKEN=your-secure-api-key-here

# Storage Mode
# - stateless: Files stored temporarily, deleted after response (development only)
# - s3: Files uploaded to S3-compatible storage (required for production)
STORAGE_MODE=stateless

# ============================================================
# S3 Configuration (required when STORAGE_MODE=s3)
# ============================================================
# These settings work with any S3-compatible storage:
# - AWS S3
# - Cloudflare R2 (recommended - zero egress fees)
# - MinIO
# - DigitalOcean Spaces

# --- For Cloudflare R2 ---
# 1. Create R2 bucket at: Cloudflare Dashboard > R2 > Create bucket
# 2. Get API token at: R2 > Manage R2 API Tokens > Create Token
#    - Permissions: Object Read & Write
#    - Scope: Specific bucket only
# 3. Enable public access or set up custom domain for S3_PUBLIC_URL
#
# S3_ENDPOINT=https://YOUR_ACCOUNT_ID.r2.cloudflarestorage.com
# S3_REGION=auto
# S3_BUCKET=ffmpeg-output
# S3_ACCESS_KEY_ID=your-r2-access-key-id
# S3_SECRET_ACCESS_KEY=your-r2-secret-access-key
# S3_PUBLIC_URL=https://pub-xxx.r2.dev

# --- For AWS S3 ---
S3_ENDPOINT=https://s3.amazonaws.com
S3_REGION=us-east-1
S3_BUCKET=my-bucket
S3_ACCESS_KEY_ID=your-access-key
S3_SECRET_ACCESS_KEY=your-secret-key
S3_PUBLIC_URL=https://my-bucket.s3.amazonaws.com

# Path prefix for uploaded files (optional)
S3_PATH_PREFIX=ffmpeg-rest

# Deduplication settings (uses SHA-256 hashing to avoid duplicate uploads)
S3_DEDUP_ENABLED=true
S3_DEDUP_TTL_DAYS=90

# ============================================================
# GPU Worker Webhook (for self-hosted GPU workers)
# ============================================================
# Secret for validating webhook callbacks from GPU workers
# Generate with: openssl rand -base64 32
# WEBHOOK_SECRET=your-webhook-secret-here

# ============================================================
# RunPod Configuration (for serverless GPU inference)
# ============================================================
# When configured, LTX-2 jobs will be sent to RunPod instead of self-hosted workers
# Get API key at: https://www.runpod.io/console/user/settings
# RUNPOD_API_KEY=your-runpod-api-key

# RunPod endpoint IDs (create at RunPod dashboard or via API)
# RUNPOD_LTX2_ENDPOINT_ID=your-ltx2-endpoint-id
